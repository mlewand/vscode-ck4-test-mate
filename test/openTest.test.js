/* global suite, test */

var assert = require( 'assert' );

var openTest = require( '../openTest' );

// Defines a Mocha test suite to group tests of similar kind together
suite( "openTest command", function() {

	// Defines a Mocha unit test
	test( "pathToUrl return value", function() {
		var pathToUrl = openTest.pathToUrl;
		assert.equal(
			'http://tests.ckeditor.dev:1030/tests/plugins/pastefromword/lists',
			pathToUrl( '/home/john/dev/ckeditor-dev/tests/plugins/pastefromword/lists.js' ), 'Wrong ret for Linux path' );
		assert.equal(
			'http://tests.ckeditor.dev:1030/tests/plugins/pastefromword/lists',
			pathToUrl( '/c:/dev/ckeditor-dev/tests/plugins/pastefromword/lists.js' ), 'Wrong ret for Windows path' );

		// Markdown file should result with the same link.
		assert.equal(
			'http://tests.ckeditor.dev:1030/tests/plugins/pastefromword/lists',
			pathToUrl( '/c:/dev/ckeditor-dev/tests/plugins/pastefromword/lists.md' ), 'Wrong ret for Windows path' );

		// HTML file should result with the same link.
		assert.equal(
			'http://tests.ckeditor.dev:1030/tests/plugins/pastefromword/lists',
			pathToUrl( '/c:/dev/ckeditor-dev/tests/plugins/pastefromword/lists.html' ), 'Wrong ret for Windows path' );

		// This directory is not a test file.
		assert.equal( false, pathToUrl( '/c:/my/path/foo.js' ), 'Wrong ret for wrong directory' );

		// This path contains testFoo directory, it should be recognized as a wrong path.
		assert.equal( false, pathToUrl( '/c:/my/testsFoo/foo.js' ), 'Wrong ret for wrong directory' );

		// Different file just to be sure.
		assert.equal(
			'http://tests.ckeditor.dev:1030/tests/foo',
			pathToUrl( '/c:/dev/ckeditor-dev/tests/foo.js' ), 'Wrong return value for different file' );
	});
});