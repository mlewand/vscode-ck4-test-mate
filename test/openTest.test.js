/* global suite, test */

const assert = require( 'assert' ),
	openTest = require( '../openTest' );

suite( 'openTest command', function() {
	let cases = [
		// entries format: [ expected, actual, message ],
		[ 'http://tests.ckeditor.dev:1030/tests/plugins/pastefromword/lists', '/home/john/dev/ckeditor-dev/tests/plugins/pastefromword/lists.js', 'Wrong ret for Linux path' ],
		[ 'http://tests.ckeditor.dev:1030/tests/plugins/pastefromword/lists', '/c:/dev/ckeditor-dev/tests/plugins/pastefromword/lists.js', 'Wrong ret for Windows path' ],
		// Markdown file should result with the same link.
		[ 'http://tests.ckeditor.dev:1030/tests/plugins/pastefromword/lists', '/c:/dev/ckeditor-dev/tests/plugins/pastefromword/lists.md', 'Wrong ret for Windows path' ],
		// HTML file should result with the same link.
		[ 'http://tests.ckeditor.dev:1030/tests/plugins/pastefromword/lists', '/c:/dev/ckeditor-dev/tests/plugins/pastefromword/lists.html', 'Wrong ret for Windows path' ],
		// This directory is not a test file.
		[ false, '/c:/my/path/foo.js', 'Wrong ret for wrong directory' ],
		// This path contains testFoo directory, it should be recognized as a wrong path.
		[ false, '/c:/my/testsFoo/foo.js', 'Wrong ret for wrong directory' ],
		// Different file just to be sure.
		[ 'http://tests.ckeditor.dev:1030/tests/foo', '/c:/dev/ckeditor-dev/tests/foo.js', 'Wrong return value for different file' ]
	];

	for ( let vals of cases ) {
		test( 'pathToUrl return value ' + vals[ 1 ], () => {
			assert.equal( vals[ 0 ], openTest.pathToUrl( vals[ 1 ] ), vals[ 2 ] );
		} );
	}
} );